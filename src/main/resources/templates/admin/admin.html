<!DOCTYPE html>
<html layout:decorate="~{layout}" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head>
    <title>Admin</title>
</head>
<body>
<div layout:fragment="content">
    <h1>Admin panel</h1>
    <ul class="nav nav-tabs">
        <li class="nav-item">
            <a class="nav-link active" href="/admin">Users table</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="/admin/new">New User</a>
        </li>
    </ul>

    <div class="border p-3">
        <h5>Все пользователи</h5>
    </div>

    <div class="p-3 bg-white border">
        <table class="table table-striped border-top">
            <thead>
            <th>ID</th>
            <th>UserName</th>
            <th>Email</th>
            <th>Roles</th>
            <th>Edit</th>
            <th>Delete</th>
            </thead>

            <tbody>
            <tr th:each="user : ${users}">
                <td th:text="${user.getId()}"></td>
                <td th:text="${user.getUsername()}"></td>
                <td th:text="${user.getEmail()}"></td>
                <td><span th:each="role: ${user.getRoles()}" th:text="${#strings.replace(role.getName(), 'ROLE_', ' ')}"></span></td>
                <td>
                    <!-- Btn for edit user -->
                    <a type="button"
                       class="btn btn-info"
                       data-bs-toggle="modal"
                       th:attr="data-bs-target=${'#edituser' + user.id}">Изменить</a>

                    <!-- Modal for edit user -->
                    <div th:replace="fragmentModalForm :: modalForm(methodMapping='patch', textBtn='Сохранить')"></div>
                </td>
                <td>
                    <!-- Btn for delete user -->
                    <a type="button"
                       class="btn btn-danger"
                       data-bs-toggle="modal"
                       th:attr="data-bs-target=${'#deleteuser' + user.id}">Удалить</a>

                    <!-- Modal for delete user -->
                    <div th:replace="fragmentModalForm :: modalForm(methodMapping='delete', textBtn='Удалить пользователя')"></div>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
</div>
</body>
</html>